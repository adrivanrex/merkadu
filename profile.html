<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>merkadu | Dashboard</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="font-awesome/css/font-awesome.css" rel="stylesheet">
    <!-- Morris -->
    <link href="css/plugins/morris/morris-0.4.3.min.css" rel="stylesheet">
    <!-- Gritter -->
    <link href="js/plugins/gritter/jquery.gritter.css" rel="stylesheet">
    <link href="css/animate.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
</head>
<body style="background-color:white">
<div class="wrapper wrapper-content">
    <div class="row">
    <div class="col-lg-7">
        <div class="ibox float-e-margins">
            <div class="ibox-title">
                <h5>User 
                    <small>Personal Information</small>
                </h5>
                <div ibox-tools></div>
            </div>
            <div class="ibox-content">
                <div class="row">
                    <div class="col-sm-12 b-r">

                        <p>Improve your password.</p>

                        <form action="#">
                            <div class="form-group"><label>Last Password</label> <input id="lastPassword"  type="password" placeholder="Enter your current password" class="form-control"></div>
                            <div class="form-group"><label>New Password</label> <input id="newPassword" type="password" placeholder="Enter New Password" class="form-control"></div>
                            <div class="form-group"><label>Verify New Password</label> <input  id="verifyNewPassword" type="password" placeholder="Verify New Password" class="form-control"></div>
                            <div>
                                <button id="updatePassword" id="updatePassword" class="btn btn-sm btn-primary pull-right m-t-n-xs" type="submit"><strong>Update</strong></button>
                            </div>
                        </form>
                    </div>
                    <!--
                    <div class="col-sm-6"><h4>Not a member?</h4>

                        <p>You can create an account:</p>

                        <p class="text-center">
                            <a href=""><i class="fa fa-sign-in big-icon"></i></a>
                        </p>
                    </div>
                    -->
                </div>
            </div>
        </div>
    </div>
    <!--
    <div class="col-lg-5">
        <div class="ibox float-e-margins">
            <div class="ibox-title">
                <h5>Horizontal form</h5>

                <div ibox-tools></div>
            </div>
            <div class="ibox-content">
                <form class="form-horizontal">
                    <p>Sign in today for more expirience.</p>

                    <div class="form-group"><label class="col-lg-2 control-label">Email</label>

                        <div class="col-lg-10"><input type="email" placeholder="Email" class="form-control"> <span class="help-block m-b-none">Example block-level help text here.</span>
                        </div>
                    </div>
                    <div class="form-group"><label class="col-lg-2 control-label">Password</label>

                        <div class="col-lg-10"><input type="password" placeholder="Password" class="form-control"></div>
                    </div>
                    <div class="form-group">
                        <div class="col-lg-offset-2 col-lg-10">
                            <div class="checkbox"> <input icheck type="checkbox" ng-model="main.checkOne"><i></i> Remember me </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-lg-offset-2 col-lg-10">
                            <button class="btn btn-sm btn-white" type="submit">Sign in</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    -->
</div>
</div>
<!-- Mainly scripts -->
    <script src="js/jquery-2.1.1.js"></script>
    <script src="js/bootstrap.min.js"></script>
    
    <!-- Custom and plugin javascript -->
    <script>
        document.getElementById("updatePassword").addEventListener("click", updatePassword);

        function updatePassword(){
            
            lastPassword = document.getElementById("lastPassword").value;
            newPassword = document.getElementById("newPassword").value;
            verifyNewPassword = document.getElementById("verifyNewPassword").value;
            username = localStorage.getItem("username");
            Http = new XMLHttpRequest();

            url = 'graph/updatePassword.php?username='+username+'&password=' + lastPassword + '&newPassword=' + newPassword + '&verifyNewPassword='+verifyNewPassword+'';
            console.log(url);
            Http.open("GET", url);

            Http.send();

            Http.onreadystatechange = (e) => {

                if (Http.readyState == 4 && Http.status == 200) {
                    console.log(JSON.parse(Http.responseText));
                    data = JSON.parse(Http.responseText);
                    alert(data.message);
                };
            };
        }
    </script>
    
</body>
</html>